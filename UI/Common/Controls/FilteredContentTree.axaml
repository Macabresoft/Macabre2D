<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Macabresoft.Macabre2D.UI.Common"
             xmlns:avaloniaEx="clr-namespace:Macabresoft.AvaloniaEx;assembly=Macabresoft.AvaloniaEx"
             x:Class="Macabresoft.Macabre2D.UI.Common.FilteredContentTree">
    <UserControl.Resources>
        <local:AssetToIconConverter x:Key="AssetToIconConverter" />
        <avaloniaEx:ObjectToEnumerableConverter x:Key="ObjectToEnumerableConverter" />
    </UserControl.Resources>
    <TreeView BorderThickness="0"
              Items="{Binding  $parent[local:FilteredContentTree].Root, Mode=OneWay, Converter={StaticResource ObjectToEnumerableConverter}}"
              SelectedItem="{Binding $parent[local:FilteredContentTree].SelectedItem, Mode=TwoWay}">
        <TreeView.Styles>
            <Style Selector="TreeViewItem">
                <Setter Property="IsExpanded" Value="True" />
            </Style>
        </TreeView.Styles>
        <TreeView.DataTemplates>
            <TreeDataTemplate DataType="local:FilteredContentWrapper"
                              ItemsSource="{Binding Children}">
                <Grid ColumnDefinitions="Auto, *">
                    <avaloniaEx:Icon Grid.Column="0"
                                     Content="{StaticResource DirectoryIcon}"
                                     IsVisible="{Binding IsDirectory}"
                                     Margin="{StaticResource StandardMarginRight}"
                                     Foreground="{StaticResource YellowBrush}" />

                    <avaloniaEx:Icon Grid.Column="0"
                                     Content="{Binding Node, Converter={StaticResource AssetToIconConverter}}"
                                     IsVisible="{Binding !IsDirectory}"
                                     Margin="{StaticResource StandardMarginRight}"
                                     Foreground="{StaticResource TextControlForeground}" />

                    <TextBlock Grid.Column="1"
                               Text="{Binding Node.Name}"
                               HorizontalAlignment="Stretch" />
                </Grid>
            </TreeDataTemplate>
        </TreeView.DataTemplates>
    </TreeView>
</UserControl>